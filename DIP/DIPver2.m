clear all; 
close all;  
f0=imread('dark_1.jpg');
figure(1);  
subplot(2,2,1);
imshow(f0);  
title('原图像');
subplot(2,2,2);
imhist(f0);  
axis off;
title('原图像的直方图');
f1= histeq(f0);  
subplot(2,2,3);
imshow(f1);    
title('直方图均衡化后的图像');
subplot(2,2,4);
imhist(f1);  
axis off;
title('均衡化后的直方图');
figure(2);   
[m,n]=size(f0);  
I1=f0(1:fix(m/2),1:fix(n/2));  
I2=f0(1:fix(m/2),1+fix(n/2):n);  
I3=f0(1+fix(m/2):m,1:fix(n/2));  
I4=f0(1+fix(m/2):m,1+fix(n/2):n);    
subplot(2,4,1);
imshow(I1);title('子图1');  
subplot(2,4,2);
imhist(I1);title('子图1直方图');
subplot(2,4,3);
imshow(I2);title('子图2');  
subplot(2,4,4);
imhist(I2);title('子图2直方图');
subplot(2,4,5);
imshow(I3);title('子图3');  
subplot(2,4,6);
imhist(I3);title('子图3直方图');
subplot(2,4,7);
imshow(I4);title('子图4');  
subplot(2,4,8);
imhist(I4);title('子图4直方图');  
figure(3);
J1=histeq(I1);  
J2=histeq(I2);  
J3=histeq(I3);  
J4=histeq(I4);  
subplot(2,4,1); 
imshow(J1);title('子图1均衡化');  
subplot(2,4,2);
imhist(J1);title('子图1均衡化直方图');
subplot(2,4,3); 
imshow(J2);title('子图2均衡化');  
subplot(2,4,4);
imhist(J2);title('子图2均衡化直方图'); 
subplot(2,4,5);
imshow(J3);title('子图3均衡化');  
subplot(2,4,6);
imhist(J3);title('子图3均衡化直方图');
subplot(2,4,7);
imshow(J4);title('子图4均衡化');  
subplot(2,4,8);
imhist(J4);title('子图4均衡化直方图');
figure(4);
J=uint8(zeros(size(f0)));  
J(1:fix(m/2),1:fix(n/2))=J1;  
J(1:fix(m/2),1+fix(n/2):n)=J2;  
J(1+fix(m/2):m,1:fix(n/2))=J3;  
J(1+fix(m/2):m,1+fix(n/2):n)=J4;  
subplot(1,2,1);
imshow(J);title('局部均衡化图像');  
subplot(1,2,2);
imhist(J);title('局部均衡化图像直方图'); 
